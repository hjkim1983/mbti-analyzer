#!/bin/bash
# ============================================
# git-auto.sh - 자동 Git 커밋 스크립트
# ============================================
# 사용법:
#   1. ./git-auto.sh "커밋 메시지"  (인자로 메시지 전달)
#   2. ./git-auto.sh               (실행 후 메시지 입력)
# ============================================

# 1. 모든 변경사항 스테이징
git add .

# 2. 커밋 메시지 결정
if [ -n "$1" ]; then
  # 인자로 메시지가 전달된 경우
  COMMIT_MSG="$1"
else
  # 인자가 없으면 사용자에게 입력 요청
  echo "커밋 메시지를 입력하세요:"
  read -r COMMIT_MSG
  if [ -z "$COMMIT_MSG" ]; then
    echo "오류: 커밋 메시지가 비어있습니다. 커밋을 취소합니다."
    exit 1
  fi
fi

# 3. 커밋 실행
git commit -m "$COMMIT_MSG"

# 4. 결과 출력
if [ $? -eq 0 ]; then
  echo "✓ 커밋이 완료되었습니다: $COMMIT_MSG"
else
  echo "✗ 커밋 실패 (변경사항이 없거나 오류 발생)"
  exit 1
fi
